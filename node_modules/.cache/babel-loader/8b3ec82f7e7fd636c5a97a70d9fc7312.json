{"ast":null,"code":"import React from\"react\";import{BrowserRouter as Router,Switch,Route,useHistory,useLocation}from'react-router-dom';import FeedPage from'./pages/feed';import ExplorePage from'./pages/explore';import LoginPage from'./pages/login';import NotFoundPage from'./pages/not-found';import PostPage from'./pages/post';import ProfilePage from'./pages/profile';import SignupPage from'./pages/signup';import EditProfilePage from'./pages/edit-profile';import PostModal from'./components/post/PostModal';function App(){var _location$state;var history=useHistory();var location=useLocation();//keep track of previous destination\nvar prevLocation=React.useRef(location);var modal=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.modal;React.useEffect(function(){if(history.action!=='POP'&&!modal){prevLocation.current=location;}},[location,modal,history.action]);var isModalOpen=modal&&prevLocation.current!==location;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,{location:isModalOpen?prevLocation.current:location},/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:FeedPage}),/*#__PURE__*/React.createElement(Route,{path:\"/explore\",component:ExplorePage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/:username\",component:ProfilePage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/p/:postId\",component:PostPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/accounts/edit\",component:EditProfilePage}),/*#__PURE__*/React.createElement(Route,{path:\"/accounts/login\",component:LoginPage}),/*#__PURE__*/React.createElement(Route,{path:\"/accounts/emailsignup/\",component:SignupPage}),/*#__PURE__*/React.createElement(Route,{path:\"*\",component:NotFoundPage})),isModalOpen&&/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/p/:postId\",component:PostModal}));}export default App;","map":{"version":3,"sources":["/Users/ramdalisay/Desktop/WorkingMouse/instagram/instagram-react12/src/App.js"],"names":["React","BrowserRouter","Router","Switch","Route","useHistory","useLocation","FeedPage","ExplorePage","LoginPage","NotFoundPage","PostPage","ProfilePage","SignupPage","EditProfilePage","PostModal","App","history","location","prevLocation","useRef","modal","state","useEffect","action","current","isModalOpen"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,MAAlC,CAA0CC,KAA1C,CAAiDC,UAAjD,CAA6DC,WAA7D,KAAgF,kBAAhF,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,eAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mBAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gBAAvB,CACA,MAAOC,CAAAA,eAAP,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CAIA,QAASC,CAAAA,GAAT,EAAe,qBACb,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CACA,GAAMa,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA;AACA,GAAMa,CAAAA,YAAY,CAAGnB,KAAK,CAACoB,MAAN,CAAaF,QAAb,CAArB,CACA,GAAMG,CAAAA,KAAK,kBAAGH,QAAQ,CAACI,KAAZ,0CAAG,gBAAgBD,KAA9B,CAEArB,KAAK,CAACuB,SAAN,CAAgB,UAAM,CACpB,GAAIN,OAAO,CAACO,MAAR,GAAmB,KAAnB,EAA4B,CAACH,KAAjC,CAAwC,CACtCF,YAAY,CAACM,OAAb,CAAuBP,QAAvB,CACD,CACF,CAJD,CAIG,CAACA,QAAD,CAAWG,KAAX,CAAkBJ,OAAO,CAACO,MAA1B,CAJH,EAMA,GAAME,CAAAA,WAAW,CAAGL,KAAK,EAAIF,YAAY,CAACM,OAAb,GAAyBP,QAAtD,CAEA,mBACE,qDACE,oBAAC,MAAD,EAAQ,QAAQ,CAAGQ,WAAW,CAAGP,YAAY,CAACM,OAAhB,CAA0BP,QAAxD,eACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEX,QAAjC,EADF,cAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAEC,WAAlC,EAFF,cAGE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,SAAS,CAAEI,WAA1C,EAHF,cAIE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,SAAS,CAAED,QAA1C,EAJF,cAKE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,gBAAlB,CAAmC,SAAS,CAAEG,eAA9C,EALF,cAME,oBAAC,KAAD,EAAO,IAAI,CAAC,iBAAZ,CAA8B,SAAS,CAAEL,SAAzC,EANF,cAOE,oBAAC,KAAD,EAAO,IAAI,CAAC,wBAAZ,CAAqC,SAAS,CAAEI,UAAhD,EAPF,cAQE,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,SAAS,CAAEH,YAA3B,EARF,CADF,CAYGgB,WAAW,eAAI,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,YAAlB,CAA+B,SAAS,CAAEX,SAA1C,EAZlB,CADF,CAgBD,CAED,cAAeC,CAAAA,GAAf","sourcesContent":["import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route, useHistory, useLocation } from 'react-router-dom';\nimport FeedPage from './pages/feed';\nimport ExplorePage from './pages/explore';\nimport LoginPage from './pages/login';\nimport NotFoundPage from './pages/not-found';\nimport PostPage from './pages/post';\nimport ProfilePage from './pages/profile';\nimport SignupPage from './pages/signup';\nimport EditProfilePage from './pages/edit-profile'\nimport PostModal from './components/post/PostModal'\n\n\n\nfunction App() {\n  const history = useHistory();\n  const location = useLocation ();\n  //keep track of previous destination\n  const prevLocation = React.useRef(location)\n  const modal = location.state?.modal;\n\n  React.useEffect(() => {\n    if (history.action !== 'POP' && !modal) {\n      prevLocation.current = location;\n    }\n  }, [location, modal, history.action])\n\n  const isModalOpen = modal && prevLocation.current !== location;\n\n  return (\n    <>\n      <Switch location ={isModalOpen ? prevLocation.current : location}>\n        <Route exact path=\"/\" component={FeedPage} />\n        <Route path=\"/explore\" component={ExplorePage} />\n        <Route exact path=\"/:username\" component={ProfilePage} />\n        <Route exact path=\"/p/:postId\" component={PostPage} />\n        <Route exact path=\"/accounts/edit\" component={EditProfilePage} />\n        <Route path=\"/accounts/login\" component={LoginPage} />\n        <Route path=\"/accounts/emailsignup/\" component={SignupPage} />\n        <Route path=\"*\" component={NotFoundPage} />\n\n      </Switch>\n      {isModalOpen && <Route exact path=\"/p/:postId\" component={PostModal} />}\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}